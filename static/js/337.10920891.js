"use strict";(self.webpackChunksabor_con_flow_dance=self.webpackChunksabor_con_flow_dance||[]).push([[337,533],{337:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});class n{constructor(e={}){this.options={toggleSelector:"#navbar-toggle",menuSelector:"#navbar-mobile",overlaySelector:"#mobile-menu-overlay",closeSelector:"#mobile-menu-close",breakpoint:768,animationDuration:300,enableSwipeGestures:!0,enableKeyboardNavigation:!0,...e},this.isOpen=!1,this.lastFocusedElement=null,this.touchStartX=0,this.touchStartY=0,this.swipeThreshold=50,this.elements={},this.init()}init(){this.cacheElements(),this.elements.toggle&&this.elements.menu&&(this.setupEventListeners(),this.setupAccessibility(),this.setupProgressiveEnhancement(),this.updateState())}cacheElements(){this.elements={toggle:document.querySelector(this.options.toggleSelector),menu:document.querySelector(this.options.menuSelector),overlay:document.querySelector(this.options.overlaySelector),close:document.querySelector(this.options.closeSelector),menuItems:document.querySelectorAll(`${this.options.menuSelector} a`),body:document.body}}setupEventListeners(){let e;this.elements.toggle&&this.elements.toggle.addEventListener("click",this.handleToggle.bind(this)),this.elements.close&&this.elements.close.addEventListener("click",this.handleClose.bind(this)),this.elements.overlay&&this.elements.overlay.addEventListener("click",this.handleOverlayClick.bind(this)),this.elements.menuItems.forEach(e=>{e.addEventListener("click",this.handleMenuItemClick.bind(this))}),this.options.enableKeyboardNavigation&&document.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{this.handleResize()},150)}),this.options.enableSwipeGestures&&this.setupSwipeGestures(),this.setupFocusManagement()}setupSwipeGestures(){this.elements.menu&&(this.elements.menu.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!0}),this.elements.menu.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!0})),document.addEventListener("touchstart",this.handleEdgeSwipeStart.bind(this),{passive:!0}),document.addEventListener("touchend",this.handleEdgeSwipeEnd.bind(this),{passive:!0})}setupAccessibility(){this.elements.toggle&&(this.elements.toggle.setAttribute("aria-expanded","false"),this.elements.toggle.setAttribute("aria-controls",this.elements.menu.id)),this.elements.menu&&(this.elements.menu.setAttribute("aria-hidden","true"),this.elements.menu.setAttribute("role","dialog"),this.elements.menu.setAttribute("aria-modal","true")),this.elements.overlay&&this.elements.overlay.setAttribute("aria-hidden","true")}setupFocusManagement(){this.focusableElements=this.elements.menu.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),this.elements.menu.addEventListener("focusin",e=>{this.isOpen||(e.preventDefault(),this.elements.toggle.focus())})}setupProgressiveEnhancement(){document.documentElement.classList.add("js-mobile-nav");const e=document.createElement("style");e.textContent="\n      .js-mobile-nav .mobile-menu-css-fallback {\n        display: none !important;\n      }\n    ",document.head.appendChild(e),this.elements.menu.classList.add("mobile-nav-enhanced")}handleToggle(e){e.preventDefault(),e.stopPropagation(),this.isOpen?this.close():this.open()}handleClose(e){e.preventDefault(),this.close()}handleOverlayClick(e){e.target===this.elements.overlay&&this.close()}handleMenuItemClick(e){const t=e.currentTarget.getAttribute("href");t&&t.startsWith("#")?setTimeout(()=>this.close(),100):this.close()}handleKeyDown(e){if(this.isOpen)switch(e.key){case"Escape":e.preventDefault(),this.close();break;case"Tab":this.handleTabKey(e)}}handleTabKey(e){if(0===this.focusableElements.length)return;const t=this.focusableElements[0],s=this.focusableElements[this.focusableElements.length-1];e.shiftKey?document.activeElement===t&&(e.preventDefault(),s.focus()):document.activeElement===s&&(e.preventDefault(),t.focus())}handleResize(){window.innerWidth>=this.options.breakpoint&&this.isOpen&&this.close()}handleTouchStart(e){this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY}handleTouchEnd(e){const t=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY,n=this.touchStartX-t;Math.abs(this.touchStartY-s)<this.swipeThreshold&&Math.abs(n)>this.swipeThreshold&&n>0&&this.close()}handleEdgeSwipeStart(e){!this.isOpen&&e.touches[0].clientX<20&&(this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY)}handleEdgeSwipeEnd(e){if(this.isOpen)return;const t=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY,n=t-this.touchStartX;Math.abs(s-this.touchStartY)<this.swipeThreshold&&n>this.swipeThreshold&&this.open()}open(){this.isOpen||(this.isOpen=!0,this.lastFocusedElement=document.activeElement,this.elements.body.classList.add("mobile-menu-open"),this.elements.menu.classList.add("active"),this.elements.overlay&&this.elements.overlay.classList.add("active"),this.updateARIAAttributes(),this.preventBodyScroll(),setTimeout(()=>{this.elements.close?this.elements.close.focus():this.focusableElements.length>0&&this.focusableElements[0].focus()},this.options.animationDuration),this.announceToScreenReader("Navigation menu opened"),this.trackEvent("mobile_menu_opened"))}close(){this.isOpen&&(this.isOpen=!1,this.elements.body.classList.remove("mobile-menu-open"),this.elements.menu.classList.remove("active"),this.elements.overlay&&this.elements.overlay.classList.remove("active"),this.updateARIAAttributes(),this.restoreBodyScroll(),this.lastFocusedElement&&this.lastFocusedElement.focus(),this.announceToScreenReader("Navigation menu closed"),this.trackEvent("mobile_menu_closed"))}updateARIAAttributes(){this.elements.toggle&&this.elements.toggle.setAttribute("aria-expanded",this.isOpen.toString()),this.elements.menu&&this.elements.menu.setAttribute("aria-hidden",(!this.isOpen).toString()),this.elements.overlay&&this.elements.overlay.setAttribute("aria-hidden",(!this.isOpen).toString())}updateState(){this.isOpen=this.elements.menu.classList.contains("active"),this.updateARIAAttributes()}preventBodyScroll(){const e=window.pageYOffset;this.elements.body.style.position="fixed",this.elements.body.style.top=`-${e}px`,this.elements.body.style.width="100%"}restoreBodyScroll(){const e=this.elements.body.style.top;this.elements.body.style.position="",this.elements.body.style.top="",this.elements.body.style.width="",window.scrollTo(0,-1*parseInt(e||"0"))}announceToScreenReader(e){const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.classList.add("sr-only"),t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},1e3)}trackEvent(e){window.gtag&&window.gtag("event",e,{event_category:"navigation",event_label:"mobile_menu"})}toggle(){this.isOpen?this.close():this.open()}isMenuOpen(){return this.isOpen}destroy(){this.elements.toggle?.removeEventListener("click",this.handleToggle),this.elements.close?.removeEventListener("click",this.handleClose),this.elements.overlay?.removeEventListener("click",this.handleOverlayClick),this.elements.menuItems.forEach(e=>{e.removeEventListener("click",this.handleMenuItemClick)}),document.removeEventListener("keydown",this.handleKeyDown),document.documentElement.classList.remove("js-mobile-nav"),this.elements.menu.classList.remove("mobile-nav-enhanced")}static init(e={}){return new n(e)}}"undefined"==typeof window||window.moduleSystem||document.addEventListener("DOMContentLoaded",()=>{n.init()})}}]);
//# sourceMappingURL=337.10920891.js.map