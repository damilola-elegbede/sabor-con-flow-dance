(()=>{"use strict";var e,t,n,r,i={530:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});class r{constructor(e={}){this.options={enableWebVitals:!0,enableCustomMetrics:!0,enableNavigationTiming:!0,enableResourceTiming:!0,enableUserTiming:!0,sampleRate:1,bufferSize:100,sendInterval:3e4,endpoint:"/api/performance",...e},this.metrics=new Map,this.buffer=[],this.observers=new Map,this.startTime=performance.now(),this.init()}init(){Math.random()>this.options.sampleRate||(this.setupWebVitals(),this.setupCustomMetrics(),this.setupNavigationTiming(),this.setupResourceTiming(),this.setupUserTiming(),this.setupSendInterval())}setupWebVitals(){this.options.enableWebVitals&&(this.trackCLS(),this.trackFID(),this.trackLCP(),this.trackFCP(),this.trackTTFB())}trackCLS(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{for(const t of e.getEntries())t.hadRecentInput||this.recordMetric("CLS",{value:t.value,sources:t.sources?.map(e=>({element:e.node?.tagName||"unknown",previousRect:e.previousRect,currentRect:e.currentRect}))||[]})});e.observe({entryTypes:["layout-shift"]}),this.observers.set("cls",e)}catch(e){}}trackFID(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{for(const t of e.getEntries())this.recordMetric("FID",{value:t.processingStart-t.startTime,startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd})});e.observe({entryTypes:["first-input"]}),this.observers.set("fid",e)}catch(e){}}trackLCP(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{const t=e.getEntries(),n=t[t.length-1];this.recordMetric("LCP",{value:n.startTime,element:n.element?.tagName||"unknown",url:n.url||"",size:n.size||0})});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.set("lcp",e)}catch(e){}}trackFCP(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&this.recordMetric("FCP",{value:t.startTime})});e.observe({entryTypes:["paint"]}),this.observers.set("fcp",e)}catch(e){}}trackTTFB(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{for(const t of e.getEntries())this.recordMetric("TTFB",{value:t.responseStart-t.requestStart,dns:t.domainLookupEnd-t.domainLookupStart,tcp:t.connectEnd-t.connectStart,request:t.responseStart-t.requestStart,response:t.responseEnd-t.responseStart})});e.observe({entryTypes:["navigation"]}),this.observers.set("navigation",e)}catch(e){}}setupCustomMetrics(){this.options.enableCustomMetrics&&(this.trackBundleLoadTimes(),this.trackCriticalResources(),this.trackUserInteractions(),this.trackMemoryUsage())}trackBundleLoadTimes(){performance.mark("bundle-start"),window.addEventListener("load",()=>{performance.mark("bundle-end");const e=performance.measure("bundle-load","bundle-start","bundle-end");this.recordMetric("Bundle Load Time",{value:e.duration,bundles:this.getLoadedBundles()})})}getLoadedBundles(){return Array.from(document.querySelectorAll("script[src]")).map(e=>({src:e.src,async:e.async,defer:e.defer}))}trackCriticalResources(){const e=document.querySelector(".hero img, .hero video");if(e){const t=performance.now(),n=()=>{const n=performance.now()-t;this.recordMetric("Hero Media Load",{value:n,type:e.tagName.toLowerCase(),src:e.src||e.currentSrc})};e.complete||e.readyState>=2?n():(e.addEventListener("load",n),e.addEventListener("loadeddata",n))}"fonts"in document&&document.fonts.ready.then(()=>{this.recordMetric("Fonts Loaded",{value:performance.now()-this.startTime,count:document.fonts.size})})}trackUserInteractions(){let e=null;const t=["click","touchstart","keydown","scroll"],n=r=>{e||(e=performance.now(),this.recordMetric("Time to First Interaction",{value:e-this.startTime,type:r.type}),t.forEach(e=>{document.removeEventListener(e,n)}))};t.forEach(e=>{document.addEventListener(e,n,{passive:!0,once:!0})}),this.trackScrollDepth()}trackScrollDepth(){let e=0,t=null;window.addEventListener("scroll",()=>{const n=window.pageYOffset,r=document.documentElement.scrollHeight-window.innerHeight,i=Math.round(n/r*100);i>e&&(e=i),clearTimeout(t),t=setTimeout(()=>{this.recordMetric("Scroll Depth",{value:e,timestamp:performance.now()})},500)},{passive:!0}),window.addEventListener("beforeunload",()=>{this.recordMetric("Final Scroll Depth",{value:e})})}trackMemoryUsage(){if("memory"in performance){const e=()=>{this.recordMetric("Memory Usage",{used:performance.memory.usedJSHeapSize,total:performance.memory.totalJSHeapSize,limit:performance.memory.jsHeapSizeLimit})};e(),setInterval(e,6e4)}}setupNavigationTiming(){this.options.enableNavigationTiming&&window.addEventListener("load",()=>{const e=performance.getEntriesByType("navigation")[0];e&&this.recordMetric("Navigation Timing",{dns:e.domainLookupEnd-e.domainLookupStart,tcp:e.connectEnd-e.connectStart,ttfb:e.responseStart-e.requestStart,download:e.responseEnd-e.responseStart,domParsing:e.domContentLoadedEventStart-e.responseEnd,resourceLoading:e.loadEventStart-e.domContentLoadedEventStart})})}setupResourceTiming(){if(!this.options.enableResourceTiming)return;const e=()=>{const e=performance.getEntriesByType("resource").filter(e=>e.duration>1e3);e.length>0&&this.recordMetric("Slow Resources",{count:e.length,resources:e.map(e=>({name:e.name,duration:e.duration,size:e.transferSize,type:e.initiatorType}))})};window.addEventListener("load",()=>{setTimeout(e,1e3)})}setupUserTiming(){if(!this.options.enableUserTiming)return;const e=()=>{const e=performance.getEntriesByType("mark"),t=performance.getEntriesByType("measure");(e.length>0||t.length>0)&&this.recordMetric("User Timing",{marks:e.map(e=>({name:e.name,startTime:e.startTime})),measures:t.map(e=>({name:e.name,duration:e.duration,startTime:e.startTime}))})};window.addEventListener("load",()=>{setTimeout(e,2e3)})}recordMetric(e,t){const n={name:e,data:t,timestamp:Date.now(),url:window.location.href,userAgent:navigator.userAgent,connection:this.getConnectionInfo()};this.metrics.set(e,n),this.buffer.push(n),this.isCriticalMetric(e)&&this.sendMetrics([n])}getConnectionInfo(){if("connection"in navigator){const e=navigator.connection;return{effectiveType:e.effectiveType,downlink:e.downlink,rtt:e.rtt,saveData:e.saveData}}return null}isCriticalMetric(e){return["CLS","FID","LCP"].includes(e)}setupSendInterval(){setInterval(()=>{this.buffer.length>0&&this.sendBufferedMetrics()},this.options.sendInterval),window.addEventListener("beforeunload",()=>{this.sendBufferedMetrics(!0)}),this.checkBufferSize()}checkBufferSize(){this.buffer.length>=this.options.bufferSize&&this.sendBufferedMetrics()}sendBufferedMetrics(e=!1){if(0===this.buffer.length)return;const t=[...this.buffer];this.buffer=[],this.sendMetrics(t,e)}async sendMetrics(e,t=!1){const n={metrics:e,session:this.getSessionId(),page:{url:window.location.href,title:document.title,referrer:document.referrer},timestamp:Date.now()};try{t&&"sendBeacon"in navigator?navigator.sendBeacon(this.options.endpoint,JSON.stringify(n)):(this.sendToAnalytics(e),this.options.endpoint&&await fetch(this.options.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),keepalive:!0}))}catch(r){}}sendToAnalytics(e){window.gtag&&e.forEach(e=>{void 0!==e.data.value&&window.gtag("event","web_vitals",{name:e.name,value:Math.round(e.data.value),metric_id:this.generateMetricId(e),custom_parameters:e.data})})}generateMetricId(e){return`${e.name}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getSessionId(){return this.sessionId||(this.sessionId=`${Date.now()}_${Math.random().toString(36).substr(2,9)}`),this.sessionId}trackCustomEvent(e,t={}){this.recordMetric(`Custom: ${e}`,t)}mark(e){performance.mark(e)}measure(e,t,n){const r=performance.measure(e,t,n);return this.recordMetric(`Measure: ${e}`,{value:r.duration,startTime:r.startTime}),r}getMetrics(){return Object.fromEntries(this.metrics)}start(){this.init()}stop(){this.observers.forEach(e=>e.disconnect()),this.observers.clear(),this.sendBufferedMetrics()}static init(e={}){return new r(e)}}"undefined"==typeof window||window.moduleSystem||document.addEventListener("DOMContentLoaded",()=>{r.init()})}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return i[e](n,n.exports,o),n.exports}o.m=i,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);o.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>s[e]=()=>n[e]);return s.default=()=>n,o.d(i,s),i},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,n)=>(o.f[n](e,t),t),[])),o.u=e=>(96===e?"vendors":e)+"."+{96:"982027b1",155:"c3e7173a",173:"cb20679e",337:"10920891",448:"2bae9947",574:"f1d388b1",718:"28b09a4b",787:"ee86c46d",818:"f443c6d8",950:"4802ff07"}[e]+".js",o.miniCssF=e=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="sabor-con-flow-dance:",o.l=(e,t,i,s)=>{if(n[e])n[e].push(t);else{var a,c;if(void 0!==i)for(var d=document.getElementsByTagName("script"),l=0;l<d.length;l++){var u=d[l];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+i){a=u;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",r+i),a.src=e),n[e]=[t];var m=(t,r)=>{a.onerror=a.onload=null,clearTimeout(h);var i=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(r)),t)return t(r)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),c&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=792,(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={538:0,792:0};o.f.j=(t,n)=>{var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((n,i)=>r=e[t]=[n,i]);n.push(r[2]=i);var s=o.p+o.u(t),a=new Error;o.l(s,n=>{if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,r[1](a)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,i,s=n[0],a=n[1],c=n[2],d=0;if(s.some(t=>0!==e[t])){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);c&&c(o)}for(t&&t(n);d<s.length;d++)i=s[d],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunksabor_con_flow_dance=self.webpackChunksabor_con_flow_dance||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=o(530);class c{static init(){this.addNoJSFallbacks(),this.enhanceFormsWithoutJS(),this.setupAccessibilityEnhancements(),this.addPerformanceOptimizations()}static addNoJSFallbacks(){document.documentElement.classList.remove("no-js"),document.documentElement.classList.add("js"),this.addNoscriptNavigation(),this.addNoscriptGallery(),this.addNoscriptForms()}static addNoscriptNavigation(){const e=document.createElement("style");e.textContent="\n      /* CSS-only mobile menu fallback */\n      .no-js .mobile-menu-toggle:checked + .mobile-menu {\n        display: block !important;\n      }\n      \n      .no-js .mobile-menu {\n        display: none;\n        position: absolute;\n        top: 100%;\n        left: 0;\n        right: 0;\n        background: #000;\n        z-index: 1000;\n      }\n      \n      .no-js .mobile-menu-toggle {\n        display: none;\n      }\n      \n      .no-js .mobile-menu-label {\n        display: block;\n        cursor: pointer;\n      }\n    ",document.documentElement.classList.contains("js")||document.head.appendChild(e)}static addNoscriptGallery(){document.querySelectorAll(".media-item").forEach(e=>{const t=e.querySelector('a[href*="full-size"]');t&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noopener"))})}static addNoscriptForms(){document.querySelectorAll("form").forEach(e=>{const t=e.querySelector('button[type="submit"]');t&&!t.hasAttribute("formnovalidate")&&e.setAttribute("novalidate","false"),e.addEventListener("submit",()=>{const t=document.createElement("div");t.className="form-loading",t.innerHTML="<p>Submitting form, please wait...</p>",t.style.cssText="\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(255,255,255,0.9);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 100;\n        ",e.style.position="relative",e.appendChild(t)})})}static enhanceFormsWithoutJS(){document.querySelectorAll('input[type="email"]').forEach(e=>{e.hasAttribute("pattern")||e.setAttribute("pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$")}),document.querySelectorAll("input, textarea, select").forEach(e=>{if(e.getAttribute("aria-label")||e.getAttribute("aria-labelledby")||!document.querySelector(`label[for="${e.id}"]`)&&e.placeholder&&e.setAttribute("aria-label",e.placeholder),e.required&&!e.getAttribute("aria-describedby")){const t=`${e.id||"field"}-hint`,n=document.createElement("div");n.id=t,n.className="field-hint sr-only",n.textContent="This field is required",e.parentNode.insertBefore(n,e.nextSibling),e.setAttribute("aria-describedby",t)}})}static setupAccessibilityEnhancements(){this.addSkipLinks(),this.enhanceKeyboardNavigation(),this.addARIAAttributes(),this.setupFocusManagement()}static addSkipLinks(){const e=document.createElement("nav");e.className="skip-navigation",e.setAttribute("aria-label","Skip navigation"),[{href:"#main-content",text:"Skip to main content"},{href:"#navigation",text:"Skip to navigation"},{href:"#footer",text:"Skip to footer"}].forEach(t=>{const n=document.createElement("a");n.href=t.href,n.textContent=t.text,n.className="skip-link",e.appendChild(n)}),document.body.insertBefore(e,document.body.firstChild)}static enhanceKeyboardNavigation(){const e=document.createElement("style");e.textContent="\n      .js-focus-visible :focus:not(.focus-visible) {\n        outline: none;\n      }\n      \n      .js-focus-visible .focus-visible {\n        outline: 2px solid #C7B375;\n        outline-offset: 2px;\n      }\n    ",document.head.appendChild(e);let t=!0;const n=this.throttle(()=>{t=!0},100);document.addEventListener("keydown",n),document.addEventListener("mousedown",()=>{t=!1}),document.addEventListener("focusin",e=>{t&&e.target.classList.add("focus-visible")}),document.addEventListener("focusout",e=>{e.target.classList.remove("focus-visible")}),document.documentElement.classList.add("js-focus-visible")}static addARIAAttributes(){const e=document.querySelector("main");e&&!e.getAttribute("role")&&e.setAttribute("role","main");const t=document.querySelector("nav");t&&!t.getAttribute("role")&&t.setAttribute("role","navigation"),document.querySelectorAll("button:not([aria-label])").forEach(e=>{const t=e.querySelector('i[class*="fa-"]');if(t&&!e.textContent.trim()){const n=t.className;let r="Button";n.includes("fa-menu")||n.includes("fa-bars")?r="Open menu":n.includes("fa-close")||n.includes("fa-times")?r="Close":n.includes("fa-search")&&(r="Search"),e.setAttribute("aria-label",r)}}),document.querySelectorAll('[data-toggle="dropdown"]').forEach(e=>{e.hasAttribute("aria-expanded")||e.setAttribute("aria-expanded","false")})}static setupFocusManagement(){document.addEventListener("keydown",e=>{if("Tab"===e.key){const t=document.querySelector(".modal.active, .lightbox.active");t&&this.trapFocus(e,t)}}),document.addEventListener("keydown",e=>{if("Escape"===e.key){const e=document.querySelector(".modal.active, .lightbox.active");if(e){const t=e.querySelector(".close, .modal-close, .lightbox-close");t&&t.click()}}})}static trapFocus(e,t){const n=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),r=n[0],i=n[n.length-1];e.shiftKey?document.activeElement===r&&(e.preventDefault(),i.focus()):document.activeElement===i&&(e.preventDefault(),r.focus())}static addPerformanceOptimizations(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches&&document.documentElement.classList.add("reduced-motion"),"connection"in navigator){const{connection:e}=navigator;"slow-2g"!==e.effectiveType&&"2g"!==e.effectiveType||document.documentElement.classList.add("slow-connection"),e.saveData&&document.documentElement.classList.add("save-data")}"PerformanceObserver"in window&&this.setupPerformanceObserver()}static setupPerformanceObserver(){try{new PerformanceObserver(e=>{for(const t of e.getEntries())t.hadRecentInput}).observe({entryTypes:["layout-shift"]})}catch(e){}try{new PerformanceObserver(e=>{const t=e.getEntries();t[t.length-1]}).observe({entryTypes:["largest-contentful-paint"]})}catch(e){}}static throttle(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...r)},t)}}}class d{static features=new Map;static detect(){this.detectIntersectionObserver(),this.detectWebP(),this.detectServiceWorker(),this.detectLocalStorage(),this.detectTouchSupport(),this.detectNetworkInformation(),this.detectPreferredMotion(),this.detectModuleSupport(),this.detectCSSGrid(),this.detectLazyLoading(),this.detectWebGL(),this.detectBatteryAPI(),this.addFeatureClasses()}static detectIntersectionObserver(){const e="IntersectionObserver"in window;this.features.set("intersection-observer",e),e||this.loadPolyfill("intersection-observer")}static detectWebP(){const e=document.createElement("canvas");e.width=1,e.height=1;const t=0===e.toDataURL("image/webp").indexOf("data:image/webp");this.features.set("webp",t)}static detectServiceWorker(){const e="serviceWorker"in navigator;this.features.set("service-worker",e)}static detectLocalStorage(){let e=!1;try{const t="localStorage-test";localStorage.setItem(t,t),localStorage.removeItem(t),e=!0}catch(t){e=!1}this.features.set("local-storage",e)}static detectTouchSupport(){const e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;this.features.set("touch",e)}static detectNetworkInformation(){const e="connection"in navigator;if(this.features.set("network-information",e),e){const{connection:e}=navigator;this.features.set("connection-type",e.effectiveType),this.features.set("save-data",e.saveData||!1)}}static detectPreferredMotion(){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;this.features.set("prefers-reduced-motion",e)}static detectModuleSupport(){const e="noModule"in document.createElement("script");this.features.set("es-modules",e)}static detectCSSGrid(){const e=CSS.supports("display","grid");this.features.set("css-grid",e)}static detectLazyLoading(){const e="loading"in HTMLImageElement.prototype;this.features.set("native-lazy-loading",e)}static detectWebGL(){let e=!1;try{const t=document.createElement("canvas");e=!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){e=!1}this.features.set("webgl",e)}static detectBatteryAPI(){const e="getBattery"in navigator;this.features.set("battery-api",e)}static addFeatureClasses(){const e=document.documentElement;this.features.forEach((t,n)=>{"boolean"==typeof t?e.classList.add(t?n:`no-${n}`):e.classList.add(`${n}-${t}`)}),this.features.get("touch")&&!this.features.get("css-grid")&&e.classList.add("legacy-mobile"),this.features.get("es-modules")||e.classList.add("legacy-browser"),this.features.get("save-data")&&e.classList.add("data-saver")}static async loadPolyfill(e){const t={"intersection-observer":()=>o.e(96).then(o.t.bind(o,127,19))}[e];if(t)try{await t()}catch(n){}}static hasFeature(e){return this.features.get(e)||!1}static getFeature(e){return this.features.get(e)}static getAllFeatures(){return Object.fromEntries(this.features)}static getDeviceScore(){const e={"es-modules":20,"intersection-observer":15,"service-worker":15,webp:10,"css-grid":10,"native-lazy-loading":10,"local-storage":10,webgl:5,"network-information":5};let t=0;return this.features.forEach((n,r)=>{n&&e[r]&&(t+=e[r])}),Math.min(t,100)}static shouldUseEnhancedExperience(){const e=this.getDeviceScore(),t="slow-2g"===this.features.get("connection-type")||"2g"===this.features.get("connection-type"),n=this.features.get("save-data");return!(e<40||t||n)}static getRecommendedBundleStrategy(){const e=this.getDeviceScore(),t=this.features.get("es-modules");return"slow-2g"===this.features.get("connection-type")||"2g"===this.features.get("connection-type")||this.features.get("save-data")?"minimal":e>=80&&t?"modern":e>=60?"enhanced":"basic"}static startMonitoring(){"connection"in navigator&&navigator.connection.addEventListener("change",()=>{this.detectNetworkInformation(),this.addFeatureClasses()}),window.matchMedia("(prefers-reduced-motion: reduce)").addListener(()=>{this.detectPreferredMotion(),this.addFeatureClasses()}),window.addEventListener("orientationchange",()=>{setTimeout(()=>{this.detectTouchSupport(),this.addFeatureClasses()},100)})}}class l{constructor(){this.modules=new Map,this.loadingModules=new Set,this.performanceMonitor=null,this.config={enableAnalytics:window.ENABLE_ANALYTICS||!1,enablePerformanceMonitoring:!0,lazyLoadThreshold:"50px",moduleTimeout:5e3,retryAttempts:3},this.init()}async init(){try{this.config.enablePerformanceMonitoring&&(this.performanceMonitor=new a.default,this.performanceMonitor.start()),d.detect(),c.init(),await this.loadCriticalModules(),this.setupLazyLoading(),this.enhanceBasicFunctionality(),this.setupInteractionBasedLoading()}catch(e){this.handleInitializationError(e)}}async loadCriticalModules(){const e=["mobile-nav","lazy-load"].map(e=>this.loadModule(e,{critical:!0}));try{await Promise.allSettled(e)}catch(t){}}async loadModule(e,t={}){if(this.modules.has(e))return this.modules.get(e);if(this.loadingModules.has(e)){for(;this.loadingModules.has(e);)await new Promise(e=>setTimeout(e,100));return this.modules.get(e)}this.loadingModules.add(e);try{const n=await this.dynamicImport(e,t);return this.modules.set(e,n),this.loadingModules.delete(e),this.performanceMonitor&&this.performanceMonitor.trackCustomEvent("module_loaded",{module:e,critical:t.critical||!1}),n}catch(n){throw this.loadingModules.delete(e),n}}async dynamicImport(e,t={}){const n={"mobile-nav":()=>o.e(337).then(o.bind(o,337)),"lazy-load":()=>o.e(718).then(o.bind(o,718)),gallery:()=>o.e(173).then(o.bind(o,173)),analytics:()=>o.e(787).then(o.bind(o,787)),"performance-monitor":()=>Promise.resolve().then(o.bind(o,530)),"social-features":()=>o.e(818).then(o.bind(o,818)),"whatsapp-chat":()=>o.e(448).then(o.bind(o,448)),"pricing-calculator":()=>o.e(574).then(o.bind(o,574)),"testimonial-form":()=>o.e(155).then(o.bind(o,155)),"contact-form":()=>o.e(950).then(o.bind(o,950))}[e];if(!n)throw new Error(`Unknown module: ${e}`);const r=new Promise((n,r)=>{setTimeout(()=>r(new Error(`Module ${e} load timeout`)),t.timeout||this.config.moduleTimeout)}),i=n(),s=await Promise.race([i,r]);return s.default&&"function"==typeof s.default.init&&await s.default.init(t),s.default||s}setupLazyLoading(){if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target,r=n.dataset.requiresModules;r&&(r.split(",").map(e=>e.trim()).forEach(e=>this.loadModule(e)),e.unobserve(n))}})},{rootMargin:this.config.lazyLoadThreshold,threshold:.1});document.querySelectorAll("[data-requires-modules]").forEach(t=>{e.observe(t)})}}setupInteractionBasedLoading(){Object.entries({gallery:[".gallery-trigger",".media-item"],"pricing-calculator":[".pricing-calculator"],"whatsapp-chat":[".whatsapp-button"],"social-features":[".social-share",".social-links"],"testimonial-form":[".testimonial-form"],"contact-form":[".contact-form"]}).forEach(([e,t])=>{t.forEach(t=>{document.querySelectorAll(t).forEach(t=>{const n=()=>{this.loadModule(e),t.removeEventListener("mouseenter",n),t.removeEventListener("touchstart",n),t.removeEventListener("focus",n)};t.addEventListener("mouseenter",n,{passive:!0}),t.addEventListener("touchstart",n,{passive:!0}),t.addEventListener("focus",n,{passive:!0})})})})}enhanceBasicFunctionality(){this.enhanceBasicForms(),this.enhanceBasicNavigation(),this.enhanceBasicInteractions()}enhanceBasicForms(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",t=>{e.checkValidity()||(t.preventDefault(),e.classList.add("was-validated"))}),e.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("blur",()=>{e.checkValidity()?(e.classList.remove("is-invalid"),e.classList.add("is-valid")):(e.classList.remove("is-valid"),e.classList.add("is-invalid"))})})})}enhanceBasicNavigation(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const n=e.getAttribute("href").substring(1),r=document.getElementById(n);r&&(t.preventDefault(),r.scrollIntoView({behavior:"smooth",block:"start"}))})})}enhanceBasicInteractions(){document.querySelectorAll('button[type="submit"]').forEach(e=>{e.addEventListener("click",()=>{e.form&&e.form.checkValidity()&&(e.disabled=!0,e.textContent="Loading...",setTimeout(()=>{e.disabled=!1,e.textContent=e.dataset.originalText||"Submit"},5e3))})}),document.querySelectorAll(".alert[data-auto-dismiss]").forEach(e=>{const t=parseInt(e.dataset.autoDismiss)||5e3;setTimeout(()=>{e.style.opacity="0",setTimeout(()=>e.remove(),300)},t)})}handleInitializationError(e){window.gtag&&window.gtag("event","exception",{description:e.message,fatal:!1}),this.enhanceBasicFunctionality()}static async loadModule(e,t={}){return window.saborConFlowApp?window.saborConFlowApp.loadModule(e,t):(new l).loadModule(e,t)}static hasFeature(e){return d.hasFeature(e)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.saborConFlowApp=new l}):window.saborConFlowApp=new l})();
//# sourceMappingURL=main.c0358535.js.map