{% extends 'base.html' %}
{% load static %}

{% block title %}Contact Us - Sabor Con Flow{% endblock %}

{% block content %}
<div class="container main-content-contact">
    <h1 class="page-title">Get In Touch</h1>

    <!-- Contact Form Section -->
    <section class="contact-section contact-form-section" aria-labelledby="form-heading">
        <h2 id="form-heading" class="contact-title">Send Us a Message</h2>

        <!-- Success Message (hidden by default) -->
        <div id="form-success" class="form-message form-success" role="alert" aria-live="polite" hidden tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                 fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <span>Thank you! Your message has been sent successfully. We will get back to you soon.</span>
        </div>

        <!-- Error Message (hidden by default) -->
        <div id="form-error" class="form-message form-error" role="alert" aria-live="assertive" hidden tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                 fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <circle cx="12" cy="12" r="10"/>
                <line x1="15" y1="9" x2="9" y2="15"/>
                <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
            <span id="error-message">Something went wrong. Please try again or contact us directly.</span>
        </div>

        <form id="contact-form" class="contact-form" method="POST" action="{% url 'core:contact_submit' %}" novalidate>
            {% csrf_token %}

            <!-- Honeypot field for spam protection -->
            <div class="form-field-honeypot" aria-hidden="true">
                <label for="website">Website</label>
                <input type="text" id="website" name="website" tabindex="-1" autocomplete="off">
            </div>

            <div class="form-group">
                <label for="name" class="form-label">
                    Name <span class="required" aria-label="required">*</span>
                </label>
                <input
                    type="text"
                    id="name"
                    name="name"
                    class="form-input"
                    required
                    minlength="2"
                    maxlength="100"
                    autocomplete="name"
                    aria-describedby="name-error"
                    placeholder="Your full name"
                >
                <span id="name-error" class="form-error-text" role="alert" aria-live="polite"></span>
            </div>

            <div class="form-group">
                <label for="email" class="form-label">
                    Email <span class="required" aria-label="required">*</span>
                </label>
                <input
                    type="email"
                    id="email"
                    name="email"
                    class="form-input"
                    required
                    maxlength="254"
                    autocomplete="email"
                    aria-describedby="email-error"
                    placeholder="your.email@example.com"
                >
                <span id="email-error" class="form-error-text" role="alert" aria-live="polite"></span>
            </div>

            <div class="form-group">
                <label for="subject" class="form-label">Subject</label>
                <select id="subject" name="subject" class="form-input form-select">
                    <option value="general">General Inquiry</option>
                    <option value="classes">Class Information</option>
                    <option value="private">Private Lessons</option>
                    <option value="events">Events & Workshops</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="form-group">
                <label for="message" class="form-label">
                    Message <span class="required" aria-label="required">*</span>
                </label>
                <textarea
                    id="message"
                    name="message"
                    class="form-input form-textarea"
                    required
                    minlength="10"
                    maxlength="2000"
                    rows="6"
                    aria-describedby="message-error message-counter"
                    placeholder="How can we help you?"
                ></textarea>
                <div class="form-textarea-footer">
                    <span id="message-error" class="form-error-text" role="alert" aria-live="polite"></span>
                    <span id="message-counter" class="character-counter" aria-live="off">0 / 2000</span>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" id="submit-btn" class="btn btn-primary btn-submit">
                    <span class="btn-text">Send Message</span>
                    <span class="btn-loading" aria-hidden="true" hidden>
                        <svg class="spinner" viewBox="0 0 24 24" width="20" height="20">
                            <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor"
                                    stroke-width="3" stroke-dasharray="30 70"/>
                        </svg>
                        Sending...
                    </span>
                </button>
            </div>
        </form>
    </section>

    <!-- Alternative Contact Methods -->
    <section class="contact-section" aria-labelledby="email-heading">
        <h2 id="email-heading" class="contact-title">Email Us Directly</h2>
        <div class="contact-item">
            <div class="contact-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="36" height="36" fill="#C7B375">
                    <path d="M0 0h24v24H0z" fill="none"/>
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8l8 5 8-5v10zm-8-7L4 6h16l-8 5z"/>
                </svg>
            </div>
            <div>
                <p>For class information, booking, and general inquiries:</p>
                <a href="mailto:saborconflowdance@gmail.com" class="contact-link">saborconflowdance@gmail.com</a>
            </div>
        </div>
    </section>

    <section class="contact-section" aria-labelledby="whatsapp-heading">
        <h2 id="whatsapp-heading" class="contact-title">Join Our WhatsApp Community</h2>
        <div class="contact-item">
            <div class="contact-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="36" height="36">
                    <rect width="24" height="24" rx="6" ry="6" fill="#25D366"/>
                    <path fill="#ffffff" d="M17.6 6.2c-1.5-1.5-3.4-2.3-5.5-2.3-4.3 0-7.8 3.5-7.8 7.8 0 1.4.4 2.7 1 3.9l-1.1 4 4.1-1.1c1.1.6 2.4 1 3.7 1 4.3 0 7.8-3.5 7.8-7.8.1-2.1-.7-4-2.2-5.5zm-5.5 12c-1.2 0-2.3-.3-3.3-.9l-.2-.1-2.4.6.6-2.3-.2-.2c-.6-1-1-2.2-1-3.4 0-3.6 2.9-6.5 6.5-6.5 1.7 0 3.3.7 4.6 1.9 1.2 1.2 1.9 2.8 1.9 4.6-.1 3.5-3 6.3-6.5 6.3zm3.6-4.9c-.2-.1-1.1-.6-1.3-.6-.2-.1-.3-.1-.4.1-.1.2-.5.6-.6.8-.1.1-.2.1-.4 0-.6-.3-1.3-.7-1.9-1.3-.8-.7-1.2-1.5-1.3-1.7-.1-.2 0-.3.1-.4l.3-.3s.1-.2.2-.3c.1-.1.1-.2.1-.3 0-.1 0-.2-.1-.3l-.6-1.4c-.1-.3-.3-.3-.4-.3h-.4c-.1 0-.3.1-.5.2-.2.1-.6.6-.6 1.4s.6 1.6.7 1.7c.1.1 1.3 2 3.2 2.8.4.2.8.3 1 .3.2.1.5.1.7.1.2 0 .6-.3.7-.5.1-.3.1-.5.1-.6-.1-.1-.2-.1-.4-.2z"/>
                </svg>
            </div>
            <div>
                <p>Stay updated with class schedules, events, and connect with fellow dancers in our community:</p>
                <a href="https://chat.whatsapp.com/GaZONDA1HgFG7C8djihJ1x" target="_blank" rel="noopener noreferrer" class="whatsapp-button">
                    Join WhatsApp Group
                    <span class="sr-only">(opens in new tab)</span>
                </a>
            </div>
        </div>
    </section>

    <section class="contact-section" aria-labelledby="social-heading">
        <h2 id="social-heading" class="contact-title">Social Media</h2>
        <div class="contact-item">
            <div class="contact-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="36" height="36">
                    <defs>
                        <linearGradient id="instaContactGradient" x1="0%" y1="100%" x2="100%" y2="0%">
                          <stop offset="0%" stop-color="#FEDA75"/><stop offset="25%" stop-color="#F58529"/><stop offset="50%" stop-color="#DD2A7B"/><stop offset="75%" stop-color="#833AB4"/><stop offset="100%" stop-color="#405DE6"/>
                        </linearGradient>
                    </defs>
                    <rect width="24" height="24" rx="6" ry="6" fill="url(#instaContactGradient)"/>
                    <path fill="none" stroke="#ffffff" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
                          d="M12 16.14a4.14 4.14 0 100-8.28 4.14 4.14 0 000 8.28z"/>
                    <circle fill="#ffffff" cx="17.3" cy="6.7" r="1.1"/>
                    <rect x="3.5" y="3.5" width="17" height="17" rx="4" ry="4" fill="none" stroke="#ffffff" stroke-width="1.8"/>
                </svg>
            </div>
            <div>
                <p>Follow us on Instagram for photos, videos, and announcements:</p>
                <a href="https://www.instagram.com/saborconflow.dance/" target="_blank" rel="noopener noreferrer" class="contact-link">
                    @saborconflow.dance
                    <span class="sr-only">(opens in new tab)</span>
                </a>
            </div>
        </div>
        <div class="contact-item">
            <div class="contact-icon" aria-hidden="true">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="36" height="36">
                    <rect width="24" height="24" rx="6" ry="6" fill="#1877F2"/>
                    <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z" fill="#ffffff"/>
                </svg>
            </div>
            <div>
                <p>Connect with us on Facebook:</p>
                <a href="https://www.facebook.com/profile.php?id=61575502290591" target="_blank" rel="noopener noreferrer" class="contact-link">
                    Sabor Con Flow Dance
                    <span class="sr-only">(opens in new tab)</span>
                </a>
            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/contact.js' %}"></script>
{% endblock %}
